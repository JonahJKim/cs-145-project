# paper-source-trace

## Prerequisites
- Linux
- Python 3.9
- PyTorch 1.10.0+cu111

## Getting Started

### Installation

Clone this repo.

```bash
git clone https://github.com/THUDM/paper-source-trace.git
cd paper-source-trace
```

Please install dependencies by

```bash
pip install -r requirements.txt
```

## PST Dataset
The dataset can be downloaded from [BaiduPan](https://pan.baidu.com/s/1I_HZXBx7U0UsRHJL5JJagw?pwd=bft3) with password bft3, [Aliyun](https://open-data-set.oss-cn-beijing.aliyuncs.com/oag-benchmark/kddcup-2024/PST/PST.zip) or [DropBox](https://www.dropbox.com/scl/fi/namx1n55xzqil4zbkd5sv/PST.zip?rlkey=impcbm2acqmqhurv2oj0xxysx&dl=1).
The paper XML files are generated by [Grobid](https://grobid.readthedocs.io/en/latest/Introduction/) APIs from paper pdfs.

## Run Baselines for KDD Cup 2024
First, download DBLP dataset from [AMiner](https://opendata.aminer.cn/dataset/DBLP-Citation-network-V16.zip).
Put the unzipped PST directory into ``data/`` and unzipped DBLP dataset into ``data/PST/``.

```bash
cd $project_path
export CUDA_VISIBLE_DEVICES='?'  # specify which GPU(s) to be used
export PYTHONPATH="`pwd`:$PYTHONPATH"

# Method 1: Random Forest
python rf/process_kddcup_data.py
python rf/model_rf.py  # output at out/kddcup/rf/

# Method 2: Network Embedding
python net_emb.py  # output at out/kddcup/prone/

# Method 3: SciBERT
python bert.py  # output at out/kddcup/scibert/
```


## How to Run
```bash
cd $project_path
export CUDA_VISIBLE_DEVICES='?'  # specify which GPU(s) to be used

python rule.py  # rule-based method
python bert.py  # BERT-based method
python net_emb.py  # network embedding based method (ProNE)

python glm/test_glm.py  # test glm
bash glm/run_finetune_ds_10b.sh  # train glm-10b model
bash glm/run_finetune_ds.sh  # train glm-2b model

python gpt-api/gpt.py  # use gpt model.Token and api-base are needed.
python gpt-api/map.py  # calculate map

python claude/claude.py  #use claude model.URL and key are needed.

python galactica/process.py  # data processing
python galactica/gala_finetune.py  # finetune galactica
```
